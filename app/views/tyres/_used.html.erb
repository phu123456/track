<br>
<p align="center" style="font-size:160%;">Change Tyre Status</p>
<div class="center-box">
  <table class="table my_table">
    <tr>
      <th>Brand</th>
      <th>Serial</th>
      <th>Distance Used</th>
      <th>Current Vehicle</th>
    </tr>

    <tr>
      <td><%= @tyre.brand %></td>
      <td><%= @tyre.serial %></td>
      <td><%= @tyre.total_distance %> km</td>
      <td><%= Vehicle.find(@tyre.vehicle_id).plate %></td>
    </tr>
  </table>

  <div class="status">
    <p align="center" style="font-size:120%; font-weight: bold;">Current Position</p>
    <div id="svgImg" align="center"></div>
    <div align="center">
      <font> Change tyre status to: </font>
      <button type="button" class="btn btn-success btn-sm">Available</button>
      <button type="button" class="btn btn-danger btn-sm">Drestoryed</button>
    </div>
    <br>
  </div>
</div>

<script>
category_dict={
     "4Wheels":"<%= asset_path('4Wheels.svg') %>",
     "6Wheels":"<%= asset_path('6Wheels.svg') %>",
     "8WheelsSemi":"<%= asset_path('8WheelsSemi.svg') %>",
     "10Wheels":"<%= asset_path('10Wheels.svg') %>",
     "12WheelsSemi":"<%= asset_path('12WheelsSemi.svg') %>",
     "12WheelsTrailer":"<%= asset_path('12WheelsTrailer.svg') %>"
};

path = category_dict["<%= Vehicle.find(@tyre.vehicle_id).category %>".replace(/[-\-]/g,"")]
document.getElementById('svgImg').innerHTML = '<object data="' + path + '" type="image/svg+xml" id="svg" width=80%;></object>'
tyre = "<%= Tyre.find(@tyre.id).position %>"
showCurrent(tyre)

function showCurrent(tyre) {
  var mySVG = document.getElementById("svg");
  var svgDoc;
  mySVG.addEventListener("load",function() {
       svgDoc = mySVG.contentDocument;
       var delta = svgDoc.getElementsByClassName("wheel");
       for (var i = 0; i < delta.length; i++) {
         if (tyre != svgDoc.getElementById(delta[i].id).id)
            svgDoc.getElementById(delta[i].id).style.setProperty("fill", "white", "");
       }
  })
}
</script>

<style>
  .center-box {
    border: black 2px solid;
    height: auto;
    width: 60%;
    margin:0 auto;
  }
</style>
